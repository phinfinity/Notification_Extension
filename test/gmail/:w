var MAX_NOTIFICATION_LENGTH=75;
function summarize_text(s){
	if (s.length > MAX_NOTIFICATION_LENGTH) {
		return s.substr(s,MAX_NOTIFICATION_LENGTH-3)+"...";
	} else {
		return s;
	}
}
xhr = new XMLHttpRequest();
xhr.open("GET", "https://mail.google.com/mail/feed/atom", false);
xhr.send();
t = xhr.responseText;
doc = $(t);
nummails = parseInt(doc.find("fullcount").html());
entries = doc.find("entry");
content = document.getElementById("content");
var retstr="<hr/><table> "
for(i=0;i<nummails;i++){
	var notification_string = $(entries[i]).find("link").attr("href") + ">" + "<tr><td>"+  $(entries[i]).find("title").html() + "</td><td>" + $(entries[i]).find("summary").html() + "</td></tr></a>"
	retstr += "<div class='notification_entry'>"+notification_string+"</div><hr/>";
	
}
retstr += "</table>";
document.getElementById("content").innerHTML=retstr;
